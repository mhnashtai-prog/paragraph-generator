<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>INTUITY - Essay Hub</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'DM Sans', 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #0d0d0d;
      color: white;
      -webkit-font-smoothing: antialiased;
      min-height: 100vh;
      position: relative;
    }

    .background {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: radial-gradient(circle at 30% 20%, rgba(201, 169, 97, 0.08) 0%, transparent 50%),
                  radial-gradient(circle at 70% 80%, rgba(201, 169, 97, 0.06) 0%, transparent 45%),
                  #0d0d0d;
      z-index: 0;
    }

    .container { 
      max-width: 1200px; 
      margin: 0 auto; 
      position: relative;
      z-index: 2;
      padding: 0 1rem;
    }

    /* Header */
    .header { 
      display: grid;
      grid-template-columns: 100px 1fr 100px;
      align-items: center;
      margin-bottom: 1rem;
      padding: 0.75rem 1rem 0.5rem;
    }

    .header-center {
      text-align: center;
    }

    .header h1 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 2.25rem; 
      font-weight: 700; 
      color: #C9A961;
      margin: 0; 
      letter-spacing: -0.04em;
      text-transform: uppercase;
    }

    .header .subtitle { 
      font-size: 0.8125rem; 
      color: #8e8e93; 
      margin: 0.25rem 0 0.125rem; 
      font-weight: 500;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .header .author { 
      font-size: 0.6875rem; 
      color: #636366; 
      font-weight: 400;
      margin: 0;
    }

    /* Toggle Bars */
    .toggle-bar {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
      padding: 0 1rem;
      flex-wrap: wrap;
    }

    .toggle-group {
      display: flex;
      background: rgba(28, 28, 30, 0.6);
      backdrop-filter: blur(40px);
      border-radius: 0.625rem;
      padding: 0.25rem;
      border: 1px solid rgba(84, 84, 88, 0.25);
      gap: 0.25rem;
    }

    .toggle-btn {
      background: transparent;
      border: none;
      color: #8e8e93;
      padding: 0.375rem 0.75rem;
      font-size: 0.625rem;
      font-weight: 700;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: 'DM Sans', sans-serif;
      white-space: nowrap;
    }

    .toggle-btn:hover {
      color: #C9A961;
    }

    .toggle-btn.active {
      background: rgba(201, 169, 97, 0.25);
      color: #C9A961;
      box-shadow: 0 2px 8px rgba(201, 169, 97, 0.2);
      border: 1px solid rgba(201, 169, 97, 0.3);
    }

    /* Content Container */
    .content-container {
      background: rgba(28, 28, 30, 0.6);
      backdrop-filter: blur(40px);
      border-radius: 1.5rem;
      padding: 2rem;
      border: 1px solid rgba(84, 84, 88, 0.25);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      max-width: 1200px;
      margin: 0 auto 2rem;
    }

    .content-header {
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid rgba(84, 84, 88, 0.2);
    }

    .content-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.5rem;
      font-weight: 600;
      color: #C9A961;
      margin-bottom: 0.5rem;
    }

    .content-subtitle {
      font-size: 0.875rem;
      color: #8e8e93;
      font-weight: 500;
    }

    /* Structures Display */
    .structures-list {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .structure-card {
      background: rgba(13, 13, 13, 0.6);
      border: 1px solid rgba(84, 84, 88, 0.2);
      border-radius: 1rem;
      padding: 1.5rem;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .structure-card:hover {
      border-color: rgba(201, 169, 97, 0.3);
      box-shadow: 0 8px 24px rgba(201, 169, 97, 0.1);
    }

    .structure-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      cursor: pointer;
    }

    .structure-category {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1rem;
      font-weight: 600;
      color: #C9A961;
      letter-spacing: 0.02em;
    }

    .expand-btn {
      background: rgba(201, 169, 97, 0.15);
      border: 1px solid rgba(201, 169, 97, 0.3);
      color: #C9A961;
      padding: 0.375rem 0.75rem;
      font-size: 0.625rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .expand-btn:hover {
      background: rgba(201, 169, 97, 0.25);
      transform: translateY(-1px);
    }

    .structure-examples {
      display: none;
    }

    .structure-examples.expanded {
      display: block;
    }

    .example-item {
      background: rgba(28, 28, 30, 0.5);
      border: 1px solid rgba(84, 84, 88, 0.2);
      border-radius: 0.75rem;
      padding: 1rem;
      margin-bottom: 0.75rem;
      font-size: 0.8125rem;
      line-height: 1.8;
      color: #e5e5e7;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .example-item:hover {
      background: rgba(201, 169, 97, 0.1);
      border-color: rgba(201, 169, 97, 0.3);
      transform: translateX(4px);
    }

    .example-item:last-child {
      margin-bottom: 0;
    }

    /* Phrases Display */
    .phrases-grid {
      display: grid;
      gap: 1.5rem;
    }

    .phrase-category {
      background: rgba(13, 13, 13, 0.6);
      border: 1px solid rgba(84, 84, 88, 0.2);
      border-radius: 1rem;
      padding: 1.5rem;
    }

    .phrase-category-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1rem;
      font-weight: 600;
      color: #C9A961;
      margin-bottom: 1rem;
      text-transform: capitalize;
    }

    .phrase-item {
      background: rgba(28, 28, 30, 0.5);
      border: 1px solid rgba(84, 84, 88, 0.2);
      border-radius: 0.75rem;
      padding: 0.75rem 1rem;
      margin-bottom: 0.5rem;
      font-size: 0.8125rem;
      color: #e5e5e7;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .phrase-item:hover {
      background: rgba(201, 169, 97, 0.1);
      border-color: rgba(201, 169, 97, 0.3);
      transform: translateX(4px);
    }

    .phrase-item:last-child {
      margin-bottom: 0;
    }

    .placeholder {
      text-align: center;
      padding: 3rem 2rem;
      color: #636366;
      font-style: italic;
      font-size: 0.875rem;
    }

    /* Essay Sections Display */
    .section-content {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .section-group {
      background: rgba(13, 13, 13, 0.6);
      border: 1px solid rgba(84, 84, 88, 0.2);
      border-radius: 1rem;
      padding: 1.5rem;
    }

    .section-group-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1rem;
      font-weight: 600;
      color: #C9A961;
      margin-bottom: 1rem;
      text-transform: capitalize;
    }

    @media (max-width: 968px) {
      .header {
        grid-template-columns: 1fr;
        text-align: center;
      }
      
      .toggle-bar {
        gap: 0.5rem;
      }
    }

    @media (max-width: 640px) {
      .header h1 {
        font-size: 1.75rem;
      }

      .toggle-btn {
        padding: 0.3rem 0.6rem;
        font-size: 0.5625rem;
      }
    }
  </style>
</head>
<body>
  <div class="background"></div>

  <div class="container">
    <!-- Header -->
    <div class="header">
      <div></div>
      <div class="header-center">
        <h1>INTUITY</h1>
        <p class="subtitle">Essay Hub</p>
        <p class="author">by Majid Nashtai</p>
      </div>
      <div></div>
    </div>

    <!-- Row 1: Level Selection -->
    <div class="toggle-bar">
      <div class="toggle-group" id="levelGroup">
        <button class="toggle-btn" onclick="switchLevel('B2')">B2</button>
        <button class="toggle-btn" onclick="switchLevel('C1')">C1</button>
        <button class="toggle-btn active" onclick="switchLevel('C2')">C2</button>
      </div>
    </div>

    <!-- Row 2: Content Type Selection -->
    <div class="toggle-bar">
      <div class="toggle-group" id="contentGroup">
        <button class="toggle-btn active" onclick="switchContent('structures')">Advanced Structures</button>
        <button class="toggle-btn" onclick="switchContent('phrases')">Useful Phrases</button>
        <button class="toggle-btn" onclick="switchContent('sections')">Essay Sections</button>
      </div>
    </div>

    <!-- Row 3: Section Selection (only visible when sections is active) -->
    <div class="toggle-bar" id="sectionBar" style="display: none;">
      <div class="toggle-group" id="sectionGroup">
        <button class="toggle-btn active" onclick="switchSection('introduction')">Introduction</button>
        <button class="toggle-btn" onclick="switchSection('body')">Body</button>
        <button class="toggle-btn" onclick="switchSection('conclusion')">Conclusion</button>
      </div>
    </div>

    <!-- Main Content Container -->
    <div class="content-container">
      <div class="content-header">
        <div class="content-title" id="contentTitle">Advanced Structures</div>
        <div class="content-subtitle" id="contentSubtitle">C2 Level â€¢ Academic Writing Patterns</div>
      </div>
      <div id="contentArea">
        <p class="placeholder">Loading content...</p>
      </div>
    </div>
  </div>

  <script>
    let currentLevel = 'C2';
    let currentContent = 'structures';
    let currentSection = 'introduction';
    
    // Data stores
    let structuresData = {
      'C2': null,
      'C1': null,
      'B2': null
    };
    
    let phrasesData = {
      'C2': null,
      'C1': null,
      'B2': null
    };
    
    let sectionsData = {
      'C2': null,
      'C1': null,
      'B2': null
    };

    // Load all data on startup
    async function loadAllData() {
      try {
        // Load structures
        const [c2Struct, c1Struct, b2Struct] = await Promise.all([
          fetch('samples/advanced-structures.json').then(r => r.json()).catch(() => null),
          fetch('samples/advanced-structures-c1.json').then(r => r.json()).catch(() => null),
          fetch('samples/advanced-structures-b2.json').then(r => r.json()).catch(() => null)
        ]);
        
        structuresData['C2'] = c2Struct;
        structuresData['C1'] = c1Struct;
        structuresData['B2'] = b2Struct;

        // Load phrases
        const [c2Phrases, c1Phrases, b2Phrases] = await Promise.all([
          fetch('phrases/C2-level.json').then(r => r.json()).catch(() => null),
          fetch('phrases/C1-level.json').then(r => r.json()).catch(() => null),
          fetch('phrases/B2-level.json').then(r => r.json()).catch(() => null)
        ]);
        
        phrasesData['C2'] = c2Phrases;
        phrasesData['C1'] = c1Phrases;
        phrasesData['B2'] = b2Phrases;

        // Load essay sections
        const [c2Sections, c1Sections, b2Sections] = await Promise.all([
          fetch('samples/C2-level.json').then(r => r.json()).catch(() => null),
          fetch('samples/C1-level.json').then(r => r.json()).catch(() => null),
          fetch('samples/B2-level.json').then(r => r.json()).catch(() => null)
        ]);
        
        sectionsData['C2'] = c2Sections;
        sectionsData['C1'] = c1Sections;
        sectionsData['B2'] = b2Sections;

        // Display initial content
        updateContentDisplay();
      } catch (error) {
        console.error('Error loading data:', error);
        document.getElementById('contentArea').innerHTML = 
          '<p class="placeholder">Error loading content. Please check your JSON files.</p>';
      }
    }

    // Display Advanced Structures
    function displayStructures() {
      const contentArea = document.getElementById('contentArea');
      const data = structuresData[currentLevel];
      
      if (!data) {
        contentArea.innerHTML = '<p class="placeholder">No structures available for this level.</p>';
        return;
      }

      const structuresList = document.createElement('div');
      structuresList.className = 'structures-list';

      let structures = [];
      
      // Handle different JSON formats
      if (data.AdvancedStructures) {
        structures = data.AdvancedStructures;
      } else if (data.structures) {
        structures = Object.entries(data.structures).map(([key, examples]) => ({
          category: key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase()),
          examples: examples
        }));
      }

      structures.forEach((structure, index) => {
        const card = document.createElement('div');
        card.className = 'structure-card';

        const header = document.createElement('div');
        header.className = 'structure-header';
        header.onclick = () => toggleStructure(index);

        const category = document.createElement('div');
        category.className = 'structure-category';
        category.textContent = structure.category;

        const expandBtn = document.createElement('button');
        expandBtn.className = 'expand-btn';
        expandBtn.textContent = index === 0 ? 'Collapse' : 'Expand';
        expandBtn.id = `expand-btn-${index}`;

        header.appendChild(category);
        header.appendChild(expandBtn);

        const examples = document.createElement('div');
        examples.className = 'structure-examples';
        examples.id = `examples-${index}`;
        if (index === 0) examples.classList.add('expanded');

        structure.examples.forEach(example => {
          const item = document.createElement('div');
          item.className = 'example-item';
          item.textContent = example;
          item.onclick = (e) => {
            e.stopPropagation();
            copyToClipboard(example);
          };
          examples.appendChild(item);
        });

        card.appendChild(header);
        card.appendChild(examples);
        structuresList.appendChild(card);
      });

      contentArea.innerHTML = '';
      contentArea.appendChild(structuresList);
    }

    // Display Useful Phrases
    function displayPhrases() {
      const contentArea = document.getElementById('contentArea');
      const data = phrasesData[currentLevel];
      
      if (!data || !data.categories) {
        contentArea.innerHTML = '<p class="placeholder">No phrases available for this level.</p>';
        return;
      }

      const phrasesGrid = document.createElement('div');
      phrasesGrid.className = 'phrases-grid';

      Object.entries(data.categories).forEach(([category, phrases]) => {
        const categoryCard = document.createElement('div');
        categoryCard.className = 'phrase-category';

        const title = document.createElement('div');
        title.className = 'phrase-category-title';
        title.textContent = category.replace(/_/g, ' ');
        categoryCard.appendChild(title);

        phrases.forEach(phrase => {
          const item = document.createElement('div');
          item.className = 'phrase-item';
          item.textContent = phrase;
          item.onclick = () => copyToClipboard(phrase);
          categoryCard.appendChild(item);
        });

        phrasesGrid.appendChild(categoryCard);
      });

      contentArea.innerHTML = '';
      contentArea.appendChild(phrasesGrid);
    }

    // Display Essay Sections
    function displaySections() {
      const contentArea = document.getElementById('contentArea');
      const data = sectionsData[currentLevel];
      
      if (!data || !data.categories || !data.categories[currentSection]) {
        contentArea.innerHTML = `<p class="placeholder">No ${currentSection} content available for ${currentLevel} level.</p>`;
        return;
      }

      const sectionContent = document.createElement('div');
      sectionContent.className = 'section-content';

      const sectionData = data.categories[currentSection];

      Object.entries(sectionData).forEach(([groupName, items]) => {
        const group = document.createElement('div');
        group.className = 'section-group';

        const title = document.createElement('div');
        title.className = 'section-group-title';
        title.textContent = groupName.replace(/_/g, ' ');
        group.appendChild(title);

        items.forEach(item => {
          const itemEl = document.createElement('div');
          itemEl.className = 'example-item';
          itemEl.textContent = item;
          itemEl.onclick = () => copyToClipboard(item);
          group.appendChild(itemEl);
        });

        sectionContent.appendChild(group);
      });

      contentArea.innerHTML = '';
      contentArea.appendChild(sectionContent);
    }

    // Toggle structure expansion
    function toggleStructure(index) {
      const examples = document.getElementById(`examples-${index}`);
      const btn = document.getElementById(`expand-btn-${index}`);
      
      if (examples.classList.contains('expanded')) {
        examples.classList.remove('expanded');
        btn.textContent = 'Expand';
      } else {
        examples.classList.add('expanded');
        btn.textContent = 'Collapse';
      }
    }

    // Switch Level
    function switchLevel(level) {
      currentLevel = level;

      document.querySelectorAll('#levelGroup .toggle-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');

      updateContentDisplay();
    }

    // Switch Content Type
    function switchContent(content) {
      currentContent = content;

      document.querySelectorAll('#contentGroup .toggle-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');

      const sectionBar = document.getElementById('sectionBar');
      if (content === 'sections') {
        sectionBar.style.display = 'flex';
      } else {
        sectionBar.style.display = 'none';
      }

      updateContentDisplay();
    }

    // Switch Section
    function switchSection(section) {
      currentSection = section;

      document.querySelectorAll('#sectionGroup .toggle-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');

      updateContentDisplay();
    }

    // Update Content Display
    function updateContentDisplay() {
      const contentTitle = document.getElementById('contentTitle');
      const contentSubtitle = document.getElementById('contentSubtitle');

      if (currentContent === 'structures') {
        contentTitle.textContent = 'Advanced Structures';
        contentSubtitle.textContent = `${currentLevel} Level â€¢ Academic Writing Patterns`;
        displayStructures();
      } else if (currentContent === 'phrases') {
        contentTitle.textContent = 'Useful Phrases';
        contentSubtitle.textContent = `${currentLevel} Level â€¢ Expression Bank`;
        displayPhrases();
      } else {
        contentTitle.textContent = 'Essay Sections';
        contentSubtitle.textContent = `${currentLevel} Level â€¢ ${currentSection.charAt(0).toUpperCase() + currentSection.slice(1)}`;
        displaySections();
      }
    }

    // Copy to Clipboard
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        const btn = event.target;
        const originalBg = btn.style.background;
        btn.style.background = 'rgba(201, 169, 97, 0.25)';
        setTimeout(() => {
          btn.style.background = originalBg;
        }, 500);
      }).catch(err => {
        console.error('Failed to copy:', err);
      });
    }

    // Initialize
    loadAllData();
  </script>
</body>
</html>
